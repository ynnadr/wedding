<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Undangan Pernikahan - Demo</title>
    <style>
        /* CSS sama seperti sebelumnya, tambah untuk video */
        .cover {
            height: 100vh;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
            position: relative; /* Untuk video overlay */
            overflow: hidden;
            animation: fadeIn 2s ease-in;
        }
        .cover::before { /* Placeholder untuk GIF/static */
            content: '';
            position: absolute;
            top: 0; left: 0; width: 100%; height: 100%;
            background-size: cover; background-position: center;
            z-index: -1;
        }
        .cover video { /* Untuk MP4 */
            position: absolute;
            top: 50%; left: 50%;
            min-width: 100%; min-height: 100%;
            width: auto; height: auto;
            transform: translate(-50%, -50%);
            z-index: -1;
            object-fit: cover;
        }
        /* (Sisa CSS sama: h1, p, enter-btn, dll.) */
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: 'Arial', sans-serif; line-height: 1.6; color: #333; background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%); overflow-x: hidden; scroll-behavior: smooth; }
        .cover h1 { font-size: 2.5em; color: #fff; text-shadow: 2px 2px 4px rgba(0,0,0,0.5); margin-bottom: 1em; animation: bounceIn 1s ease-out; }
        .cover p { font-size: 1.2em; color: #fff; margin-bottom: 2em; animation: fadeInUp 1.5s ease-out; }
        .enter-btn { padding: 1em 2em; background: #ff6b6b; color: white; border: none; border-radius: 50px; font-size: 1.1em; cursor: pointer; transition: transform 0.3s ease, box-shadow 0.3s ease; animation: pulse 2s infinite; }
        .enter-btn:hover { transform: scale(1.05); box-shadow: 0 5px 15px rgba(0,0,0,0.3); }
        .content { display: none; min-height: 100vh; padding: 2em 1em; }
        section { margin-bottom: 3em; padding: 2em; background: rgba(255,255,255,0.8); border-radius: 15px; box-shadow: 0 4px 10px rgba(0,0,0,0.1); animation: slideInUp 1s ease-out; }
        h2 { text-align: center; color: #ff6b6b; margin-bottom: 1em; font-size: 1.8em; }
        /* (Sisa: countdown, forms, dll. sama) */
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
        @keyframes bounceIn { 0% { transform: scale(0.3); opacity: 0; } 50% { transform: scale(1.05); } 70% { transform: scale(0.9); } 100% { transform: scale(1); opacity: 1; } }
        @keyframes fadeInUp { from { opacity: 0; transform: translateY(30px); } to { opacity: 1; transform: translateY(0); } }
        @keyframes pulse { 0% { transform: scale(1); } 50% { transform: scale(1.05); } 100% { transform: scale(1); } }
        @keyframes slideInUp { from { opacity: 0; transform: translateY(50px); } to { opacity: 1; transform: translateY(0); } }
        @media (min-width: 768px) { .cover h1 { font-size: 3.5em; } .cover p { font-size: 1.5em; } section { max-width: 800px; margin: 0 auto 3em; } }
    </style>
</head>
<body>
    <audio id="bgMusic" loop preload="auto"><source src="" type="audio/mpeg"></audio>

    <div class="cover" id="cover">
        <video id="coverVideo" muted loop playsinline style="display:none;"> <!-- Untuk MP4 -->
            <source src="" type="video/mp4">
        </video>
        <h1 id="coverTitle">Loading...</h1>
        <p>Kami akan menikah! Ketuk untuk membuka undangan.</p>
        <button class="enter-btn" onclick="enterInvitation()">Masuk ke Undangan</button>
    </div>

    <!-- (Content sections sama seperti sebelumnya: intro, countdown, details, rsvp, wishes, gifts) -->
    <div class="content" id="content">
        <!-- Copy sections dari kode lama -->
    </div>

    <script>
        let weddingData = {}; let targetDate;

        async function loadExternalData() {
            try {
                const response = await fetch('wedding-data.json');
                weddingData = await response.json();
                console.log('JSON loaded:', weddingData);
                loadData();
            } catch (e) {
                console.error(e); weddingData = {/* fallback */}; loadData();
            }
        }

        function loadData() {
            const coupleName = `${weddingData.namaPengantin?.pengantinWanita || ''} & ${weddingData.namaPengantin?.pengantinPria || ''}`;
            document.getElementById('coverTitle').textContent = coupleName || 'Couple Name';
            // (Update intro, details, rekening, musik sama seperti sebelumnya)

            // Handle Background Animasi
            const fileGambar = weddingData.fileGambar;
            if (fileGambar) {
                const ext = fileGambar.split('.').pop().toLowerCase();
                const cover = document.getElementById('cover');
                const video = document.getElementById('coverVideo');

                if (ext === 'gif') {
                    // GIF: Gunakan CSS background
                    cover.style.backgroundImage = `url('${fileGambar}')`;
                    video.style.display = 'none';
                } else if (ext === 'mp4') {
                    // MP4: Gunakan video element
                    video.src = fileGambar;
                    video.style.display = 'block';
                    video.play().catch(e => console.log('Video preload error:', e)); // Preload silent
                    cover.style.backgroundImage = 'none'; // Hilangkan placeholder
                } else {
                    // Static JPG/PNG
                    cover.style.backgroundImage = `url('${fileGambar}')`;
                    video.style.display = 'none';
                }
            }
            // (Sisa loadData sama)
        }

        // (Sisa script: enterInvitation, countdown, dll. sama)
        window.addEventListener('load', loadExternalData);
    </script>
</body>
</html>
